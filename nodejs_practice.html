<!DOCTYPE html>
<html lang="zh-cn">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="nico" />

        <meta name="description" content="NodeJs基本开发环境搭建实践
" />
        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="JavaScript, NodeJs, Nodejs, " />

<meta property="og:title" content="NodeJs开发环境搭建实践 "/>
<meta property="og:url" content="/nodejs_practice" />
<meta property="og:description" content="NodeJs基本开发环境搭建实践" />
<meta property="og:site_name" content="Nico&#39;sBlog" />
<meta property="og:article:author" content="nico" />
<meta property="og:article:published_time" content="2019-12-11T13:14:00+08:00" />
<meta name="twitter:title" content="NodeJs开发环境搭建实践 ">
<meta name="twitter:description" content="NodeJs基本开发环境搭建实践">

        <title>NodeJs开发环境搭建实践  · Nico&#39;sBlog
</title>
        <!--link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css" rel="stylesheet"-->
        <link href="/theme/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="/theme/css/style.min.css?e83b4deb">



    </head>
    <body>
        <div id="content">
            <div class="navbar navbar-static-top">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="/"><span class=site-name>Nico'sBlog</span></a>
                        <div class="nav-collapse collapse">
                            <ul class="nav pull-right top-menu">
                                <li >
                                    <a href=
                                       "/"
                                    >Home</a>
                                </li>
                                <li ><a href="/categories">Categories</a></li>
                                <li ><a href="/tags">Tags</a></li>
                                <li ><a href="/archives">Archives</a></li>
                                <li><form class="navbar-search" action="/search" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container-fluid">
                <div class="row-fluid">
                    <div class="span1"></div>
                    <div class="span10">
<article itemscope>
<div class="row-fluid">
    <header class="page-header span10 offset2">
        <h1>
            <a href="/nodejs_practice">
                NodeJs开发环境搭建实践
            </a>
        </h1>
    </header>
</div>

<div class="row-fluid">
    <div class="span2 table-of-content">
        <nav>
        <h4>Contents</h4>
        <div class="toc" id="">

<ul class="simple">
<li><a class="reference internal" href="#id2" id="id5">开发工具集合</a><ul>
<li><a class="reference internal" href="#gulp" id="id6">安装 Gulp 自动化构建工具</a></li>
<li><a class="reference internal" href="#babel" id="id7">安装 Babel</a></li>
<li><a class="reference internal" href="#eslint" id="id8">安装 ESLint</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id4" id="id9">NodeJs工程结构</a></li>
</ul>
</div>
        </nav>
    </div>
    <div class="span8 article-content">
            
            
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">本开发搭建实践指南中所有示例代码采自 《Learning JavaScript》第三版 英文原书中，
由于书中工具集可能比较旧，所以在安装对应工具集时，确认好版本。</p>
</div>
<p>开始前新建一个项目目录，并运行下面指令初始化项目目录</p>
<pre class="literal-block">
npm init
</pre>
<div class="section" id="id2">
<h2><a class="toc-backref" href="#id5">开发工具集合</a></h2>
<dl class="docutils">
<dt>Node</dt>
<dd>允许脱离浏览器运行 javascript 脚本</dd>
<dt>Gulp</dt>
<dd>自动化构建工具</dd>
<dt>Babel</dt>
<dd>javascript 语法转译器， 支持 ES6 -&gt; ES5 语法转换</dd>
<dt>ESLint</dt>
<dd>javascript 代码检查，让你避免常见错误，保证代码健壮性</dd>
</dl>
<p>NodeJs版本</p>
<pre class="literal-block">
nicodeMacBook-Pro:GitHub nico$ node -v
v12.13.0
nicodeMacBook-Pro:GitHub nico$ npm -v
6.12.0
</pre>
<div class="section" id="gulp">
<h3><a class="toc-backref" href="#id6">安装 Gulp 自动化构建工具</a></h3>
<p>全局安装 gulp (只安装一次？)</p>
<pre class="literal-block">
nicodeMacBook-Pro:GitHub nico$ npm install -g gulp
/usr/local/bin/gulp -&gt; /usr/local/lib/node_modules/gulp/bin/gulp.js

&gt; fsevents@1.2.9 install /usr/local/lib/node_modules/gulp/node_modules/fsevents
&gt; node install

node-pre-gyp WARN Using needle for node-pre-gyp https download
[fsevents] Success: "/usr/local/lib/node_modules/gulp/node_modules/fsevents/lib/binding/Release/node-v72-darwin-x64/fse.node" is installed via remote
+ gulp@4.0.2
added 384 packages from 238 contributors in 14.761s
nicodeMacBook-Pro:GitHub nico$ gulp -v
CLI version: 2.2.0
Local version: Unknown
</pre>
<p>安装完成后，在项目根目录安装项目本地的 gulp</p>
<pre class="literal-block">
nicodeMacBook-Pro:NodePractice nico$ npm --save-dev install gulp
</pre>
<p>测试 gulp 是否正常工作,在项目根目录下新建 gulpfile.js</p>
<pre class="literal-block">
nicodeMacBook-Pro:NodePractice nico$ ls
gulpfile.js         node_modules            package-lock.json
</pre>
<p>gulpfile.js</p>
<div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">gulp</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'gulp'</span><span class="p">);</span>
<span class="c1">// Gulp dependencies go here</span>
<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">'default'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
   <span class="c1">// Gulp tasks go here</span>
<span class="p">});</span>
</pre></div>
<p>直接执行 gulp</p>
<pre class="literal-block">
nicodeMacBook-Pro:NodePractice nico$ gulp
[21:33:29] Using gulpfile ~/GitHub/NodePractice/gulpfile.js
[21:33:29] Starting 'default'...
[21:33:29] The following tasks did not complete: default
[21:33:29] Did you forget to signal async completion?
</pre>
<p>似乎报错了，应该是示例代码太老了，可以参考 <a class="reference external" href="https://blog.csdn.net/qq_41208114/article/details/79109269">这篇文章的解决办法</a></p>
</div>
<div class="section" id="babel">
<h3><a class="toc-backref" href="#id7">安装 Babel</a></h3>
<pre class="literal-block">
npm install --save-dev gulp-babel @babel/core @babel/preset-env
</pre>
<p>创建 .babelrc, 加入下面 babel 配置。</p>
<div class="highlight"><pre><span></span><span class="p">{</span> <span class="s2">"presets"</span><span class="o">:</span> <span class="p">[</span><span class="s2">"@babel/preset-env"</span><span class="p">]</span> <span class="p">}</span>
</pre></div>
<p>测试 babel 是否正常工作，打开 gulpfile.js 加入下面代码。</p>
<div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">gulp</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'gulp'</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">babel</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'gulp-babel'</span><span class="p">);</span>
<span class="c1">// Gulp dependencies go here</span>
<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">'default'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
   <span class="c1">// Gulp tasks go here</span>
   <span class="nx">gulp</span><span class="p">.</span><span class="nx">src</span><span class="p">(</span><span class="s2">"es6/**/*.js"</span><span class="p">)</span>
     <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">babel</span><span class="p">())</span>
     <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">gulp</span><span class="p">.</span><span class="nx">dest</span><span class="p">(</span><span class="s2">"dist"</span><span class="p">));</span>
   <span class="c1">// browser source</span>
   <span class="nx">gulp</span><span class="p">.</span><span class="nx">src</span><span class="p">(</span><span class="s2">"public/es6/**/*.js"</span><span class="p">)</span>
     <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">babel</span><span class="p">())</span>
     <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">gulp</span><span class="p">.</span><span class="nx">dest</span><span class="p">(</span><span class="s2">"public/dist"</span><span class="p">));</span>
<span class="p">});</span>
</pre></div>
<p>在 es6 目录下新建一个 test.js 文件。</p>
<div class="highlight"><pre><span></span><span class="s1">'use strict'</span><span class="p">;</span>
<span class="c1">// es6 feature: block-scoped "let" declaration</span>
<span class="kr">const</span> <span class="nx">sentences</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">{</span> <span class="nx">subject</span><span class="o">:</span> <span class="s1">'JavaScript'</span><span class="p">,</span> <span class="nx">verb</span><span class="o">:</span> <span class="s1">'is'</span><span class="p">,</span> <span class="nx">object</span><span class="o">:</span> <span class="s1">'great'</span> <span class="p">},</span>
        <span class="p">{</span> <span class="nx">subject</span><span class="o">:</span> <span class="s1">'Elephants'</span><span class="p">,</span> <span class="nx">verb</span><span class="o">:</span> <span class="s1">'are'</span><span class="p">,</span> <span class="nx">object</span><span class="o">:</span> <span class="s1">'large'</span> <span class="p">},</span>
<span class="p">];</span>
<span class="c1">// es6 feature: object destructuring</span>
<span class="kd">function</span> <span class="nx">say</span><span class="p">({</span> <span class="nx">subject</span><span class="p">,</span> <span class="nx">verb</span><span class="p">,</span> <span class="nx">object</span> <span class="p">})</span> <span class="p">{</span>
     <span class="c1">// es6 feature: template strings</span>
     <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">subject</span><span class="si">}</span><span class="sb"> </span><span class="si">${</span><span class="nx">verb</span><span class="si">}</span><span class="sb"> </span><span class="si">${</span><span class="nx">object</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
<span class="p">}</span>
<span class="c1">// es6 feature: for..of</span>
<span class="k">for</span><span class="p">(</span><span class="kd">let</span> <span class="nx">s</span> <span class="k">of</span> <span class="nx">sentences</span><span class="p">)</span> <span class="p">{</span>
     <span class="nx">say</span><span class="p">(</span><span class="nx">s</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
<p>最后在项目根目录执行 gulp, 后会发现在 dist 目录下生成对应 es5 脚本文件。</p>
<div class="highlight"><pre><span></span><span class="s1">'use strict'</span><span class="p">;</span> <span class="c1">// es6 feature: block-scoped "let" declaration</span>

<span class="kd">var</span> <span class="nx">sentences</span> <span class="o">=</span> <span class="p">[{</span>
  <span class="nx">subject</span><span class="o">:</span> <span class="s1">'JavaScript'</span><span class="p">,</span>
  <span class="nx">verb</span><span class="o">:</span> <span class="s1">'is'</span><span class="p">,</span>
  <span class="nx">object</span><span class="o">:</span> <span class="s1">'great'</span>
<span class="p">},</span> <span class="p">{</span>
  <span class="nx">subject</span><span class="o">:</span> <span class="s1">'Elephants'</span><span class="p">,</span>
  <span class="nx">verb</span><span class="o">:</span> <span class="s1">'are'</span><span class="p">,</span>
  <span class="nx">object</span><span class="o">:</span> <span class="s1">'large'</span>
<span class="p">}];</span> <span class="c1">// es6 feature: object destructuring</span>

<span class="kd">function</span> <span class="nx">say</span><span class="p">(</span><span class="nx">_ref</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">subject</span> <span class="o">=</span> <span class="nx">_ref</span><span class="p">.</span><span class="nx">subject</span><span class="p">,</span>
      <span class="nx">verb</span> <span class="o">=</span> <span class="nx">_ref</span><span class="p">.</span><span class="nx">verb</span><span class="p">,</span>
      <span class="nx">object</span> <span class="o">=</span> <span class="nx">_ref</span><span class="p">.</span><span class="nx">object</span><span class="p">;</span>
  <span class="c1">// es6 feature: template strings</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">""</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">subject</span><span class="p">,</span> <span class="s2">" "</span><span class="p">).</span><span class="nx">concat</span><span class="p">(</span><span class="nx">verb</span><span class="p">,</span> <span class="s2">" "</span><span class="p">).</span><span class="nx">concat</span><span class="p">(</span><span class="nx">object</span><span class="p">));</span>
<span class="p">}</span> <span class="c1">// es6 feature: for..of</span>


<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">_i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">_sentences</span> <span class="o">=</span> <span class="nx">sentences</span><span class="p">;</span> <span class="nx">_i</span> <span class="o">&lt;</span> <span class="nx">_sentences</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">_i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">s</span> <span class="o">=</span> <span class="nx">_sentences</span><span class="p">[</span><span class="nx">_i</span><span class="p">];</span>
  <span class="nx">say</span><span class="p">(</span><span class="nx">s</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
<p>使用 node 执行在 dist 目录转译后的 test.js 文件</p>
<pre class="literal-block">
nicodeMacBook-Pro:NodePractice nico$ node dist/test.js
JavaScript is great
Elephants are large
</pre>
</div>
<div class="section" id="eslint">
<h3><a class="toc-backref" href="#id8">安装 ESLint</a></h3>
<pre class="literal-block">
npm install -g eslint
/usr/local/bin/eslint -&gt; /usr/local/lib/node_modules/eslint/bin/eslint.js
+ eslint@6.6.0
added 121 packages from 75 contributors in 5.228s
</pre>
<p>在项目根目录下通过下面指令生成 .eslintrc 文件。</p>
<pre class="literal-block">
eslint --init
</pre>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<p>在运行上面指令时，确保项目根目录下存在 package.json 文件，如果不存在，请首先通过以下指令进行生成。</p>
<pre class="last literal-block">
npm init
</pre>
</div>
<p>安装 gulp-eslint</p>
<pre class="literal-block">
nicodeMacBook-Pro:NodePractice nico$ npm install --save-dev gulp-eslint
npm WARN eslint-plugin-vue@5.2.3 requires a peer of eslint@^5.0.0 but none is installed. You must install peer dependencies yourself.
npm WARN gulp-babel@8.0.0 requires a peer of @babel/core@^7.0.0 but none is installed. You must install peer dependencies yourself.
npm WARN tsutils@3.17.1 requires a peer of typescript@&gt;=2.8.0 || &gt;= 3.2.0-dev || &gt;= 3.3.0-dev || &gt;= 3.4.0-dev || &gt;= 3.5.0-dev || &gt;= 3.6.0-dev || &gt;= 3.6.0-beta || &gt;= 3.7.0-dev || &gt;= 3.7.0-beta but none is installed. You must install peer dependencies yourself.
npm WARN vue-eslint-parser@5.0.0 requires a peer of eslint@^5.0.0 but none is installed. You must install peer dependencies yourself.
npm WARN nodepractice@1.0.0 No description
npm WARN nodepractice@1.0.0 No repository field.

+ gulp-eslint@6.0.0
added 1 package from 2 contributors in 2.053s
</pre>
<p>修改项目根目录下的 gulp.js</p>
<div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">gulp</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'gulp'</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">babel</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'gulp-babel'</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">eslint</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'gulp-eslint'</span><span class="p">);</span>
<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">'default'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
<span class="c1">// Run ESLint</span>
<span class="nx">gulp</span><span class="p">.</span><span class="nx">src</span><span class="p">([</span><span class="s2">"es6/**/*.js"</span><span class="p">,</span> <span class="s2">"public/es6/**/*.js"</span><span class="p">])</span>
     <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">eslint</span><span class="p">())</span>
     <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">eslint</span><span class="p">.</span><span class="nx">format</span><span class="p">());</span> <span class="c1">// Node source</span>
<span class="nx">gulp</span><span class="p">.</span><span class="nx">src</span><span class="p">(</span><span class="s2">"es6/**/*.js"</span><span class="p">)</span>
     <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">babel</span><span class="p">())</span>
     <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">gulp</span><span class="p">.</span><span class="nx">dest</span><span class="p">(</span><span class="s2">"dist"</span><span class="p">));</span> <span class="c1">// browser source</span>
<span class="nx">gulp</span><span class="p">.</span><span class="nx">src</span><span class="p">(</span><span class="s2">"public/es6/**/*.js"</span><span class="p">)</span>
     <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">babel</span><span class="p">())</span>
     <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">gulp</span><span class="p">.</span><span class="nx">dest</span><span class="p">(</span><span class="s2">"public/dist"</span><span class="p">));</span>
 <span class="p">});</span>
</pre></div>
<p>项目根目录下执行 gulp</p>
<pre class="literal-block">
nicodeMacBook-Pro:NodePractice nico$ gulp
[23:52:40] Using gulpfile ~/GitHub/NodePractice/gulpfile.js
[23:52:40] Starting 'default'...
[23:52:40]
/Users/nico/GitHub/NodePractice/es6/test.js
   1:13  error  Extra semicolon                               semi
   4:1   error  Expected indentation of 2 spaces but found 8  indent
   5:1   error  Expected indentation of 2 spaces but found 8  indent
   5:63  error  Unexpected trailing comma                     comma-dangle
   6:2   error  Extra semicolon                               semi
   8:13  error  Missing space before function parentheses     space-before-function-paren
   9:1   error  Expected indentation of 2 spaces but found 5  indent
   9:38  error  Trailing spaces not allowed                   no-trailing-spaces
  10:1   error  Expected indentation of 2 spaces but found 5  indent
  10:49  error  Extra semicolon                               semi
  13:1   error  Expected space(s) after "for"                 keyword-spacing
  13:9   error  's' is never reassigned. Use 'const' instead  prefer-const
  14:1   error  Expected indentation of 2 spaces but found 5  indent
  14:12  error  Extra semicolon                               semi

✖ 14 problems (14 errors, 0 warnings)
  14 errors and 0 warnings potentially fixable with the `--fix` option.
</pre>
</div>
</div>
<div class="section" id="id4">
<h2><a class="toc-backref" href="#id9">NodeJs工程结构</a></h2>
<p>如下 dist 目录用于存放 node 服务端 es6 转译后的 es5 代码，es6 目录存放 node 服务端代码，
public/es6，及 public/dist 分别存放浏览器端的 es6 代码，和 es5 代码。</p>
<pre class="literal-block">
.
├── dist
├── es6
├── gulpfile.js
├── node_modules
├── package-lock.json
├── package.json
└── public
             ├── dist
             └── es6
</pre>
<p>最后到这，就可以进行基本 Node 开发了。</p>
</div>



            
            






            <hr/>
            <aside>
            <nav>
            <ul class="articles-timeline">
                <li class="previous-article">« <a href="/scrapyredis-bloomfilter" title="Previous: ScrapyRedis集成Bloomfilter">ScrapyRedis集成Bloomfilter</a></li>
                <li class="next-article"><a href="/django_in_practice" title="Next: 赞乎产品需求规格说明书">赞乎产品需求规格说明书</a> »</li>
            </ul>
            </nav>
            </aside>
        </div>
        <section>
        <div class="span2" style="float:right;font-size:0.9em;">
            <h4>Published</h4>
            <time itemprop="dateCreated" datetime="2019-12-11T13:14:00+08:00">12 11, 2019</time>
            <h4>Category</h4>
            <a class="category-link" href="/categories#nodejs-ref">Nodejs</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="/tags#javascript-ref">JavaScript
                    <span>1</span>
</a></li>
                <li><a href="/tags#nodejs-ref">NodeJs
                    <span>1</span>
</a></li>
            </ul>
            





            





        </div>
        </section>
</div>
</article>
                    </div>
                    <div class="span1"></div>
                </div>
            </div>
        </div>
<footer>
    <div>
        Content licensed under <a rel="license"
    href="http://creativecommons.org/licenses/by/4.0/" target="_blank">
    Creative Commons Attribution 4.0 International License</a>.
    </div>

    <div>
        <span class="site-name">Nico'sBlog</span> - Life is short, you need python.
    </div>



    <div id="fpowered">
        Copyright (c) 2019-2019 Nico All Rights Revered
    </div>
</footer>            <!--script src="//code.jquery.com/jquery.min.js"></script-->
        <!--script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script-->
        <script src="/theme/jquery/jquery.min.js"></script>
        <script src="/theme/bootstrap/js/bootstrap.min.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    <script>
    (function () {
        if (window.location.hash.match(/^#comment-\d+$/)) {
            $('#comment_thread').collapse('show');
        }
    })();
    window.onhashchange=function(){
        if (window.location.hash.match(/^#comment-\d+$/))
            window.location.reload(true);
    }
    $('#comment_thread').on('shown', function () {
        var link = document.getElementById('comment-accordion-toggle');
        var old_innerHTML = link.innerHTML;
        $(link).fadeOut(200, function() {
            $(this).text('Click here to hide comments').fadeIn(200);
        });
        $('#comment_thread').on('hidden', function () {
            $(link).fadeOut(200, function() {
                $(this).text(old_innerHTML).fadeIn(200);
            });
        })
    })
</script>

    </body>
    <!-- Theme: Elegant built for Pelican
        License : MIT -->
</html>